{{- define "main" }}
<article class="mx-auto max-w-4xl">
    <header>
        {{- partial "breadcrumbs.html" . }}
        <h1 class="text-4xl lg:text-5xl font-bold mb-0">
            {{ .Title }}
            {{- if .Draft }}<span class="text-sm text-gray-600 dark:text-gray-300 lg:text-lg align-top">&nbsp;&nbsp;[{{ i18n "draft" }}]</span>{{- end }}
        </h1>
        {{- if .Description }}
            <div class="mt-2 lg:mt-3 text-lg md:text-xl lg:text-2xl text-gray-800 dark:text-gray-200 text-opacity-90">
                {{ .Description }}
            </div>
        {{- end }}
        {{- if not (.Param "hideMeta") }}
            <div class="mt-2 lg:mt-3 mb-4 text-opacity-90">
                {{- partial "helpers/post_meta.html" .  -}}
                {{- partial "translation_list.html" . -}}
            </div>
        {{- end}}
        <hr class="mt-4 mb-6">
    </header>

    {{- partial "cover.html" . }}

    {{- if (.Param "ShowToc") }}
        <div class="toc p-2 rounded-lg bg-gray-200 dark:bg-gray-700 mb-6">
            <details {{ if (.Param "TocOpen") }} open{{ end }}>
                <summary accesskey="c" title="(Alt + C)" class="cursor-pointer mx-5 focus:outline-none">
                    <div class="inline font-medium">{{- i18n "toc" | default "Table of Contents" }}</div>
                </summary>
                <div class="mx-5 px-5 py-2">
                    {{- partial "toc.html" . }}
                </div>
            </details>
        </div>
    {{- end }}

    <div class="prose dark:prose-dark prose-blue lg:prose-lg max-w-2xl">
        {{- partial "helpers/anchored_headings.html" .Content -}}
    </div>

    <footer class="mt-12">
        {{- if .Params.tags }}
            <ul>
                {{- range ($.GetTerms "tags") }}
                    <li class="inline-block mb-2" style="margin-inline-end: 3px;">
                        <a class="block px-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-800 rounded-md" href="{{ .Permalink }}">{{ .LinkTitle }}</a>
                    </li>
                {{- end }}
            </ul>
        {{- end }}

        {{- if (.Param "ShowPostNavLinks") }}
            {{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
            {{- if and (gt (len $pages) 1) (in $pages . ) }}
                <nav class="paginav">
                    {{- with $pages.Next . }}
                        <a class="prev" href="{{.Permalink}}">
                            <span class="title">« {{ i18n "prev_page" }}</span>
                            <br>
                            <span>{{- .Name -}}</span>
                        </a>
                    {{- end}}
                    {{- with $pages.Prev . }}
                        <a class="next" href="{{.Permalink}}">
                            <span class="title">{{ i18n "next_page" }} »</span>
                            <br>
                            <span>{{- .Name -}}</span>
                        </a>
                    {{- end}}
                </nav>
            {{- end }}
        {{- end }}

        {{- if (and .Site.Params.ShowShareButtons (ne .Params.disableShare true) ) }}
            {{- partial "share_icons.html" . }}
        {{- end }}
    </footer>

    {{- if (.Param "comments") }}
        {{- partial "comments.html" . }}
    {{- end }}
</article>
{{- end  }}
